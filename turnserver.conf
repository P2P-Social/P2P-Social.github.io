# /etc/turnserver.conf
# Minimal TURN config for P2P Social - DATA ONLY (no video)

# === REQUIRED: Set your server's public IP ===
external-ip=YOUR_SERVER_PUBLIC_IP

# === Ports ===
listening-port=3478
tls-listening-port=5349

# === Authentication ===
fingerprint
lt-cred-mech
realm=p2p-social.org

# Static user credentials (change the password!)
user=p2psocial:ChangeThisPassword123

# === BANDWIDTH LIMITS (blocks video streaming) ===
# 50 KB/s per session - enough for data, too slow for video
max-bps=50000
bps-capacity=50000

# 10 MB/s total server capacity
total-quota=10000000

# Max 5 connections per user
user-quota=5

# Short session lifetime (10 min)
max-allocate-lifetime=600

# === Security ===
no-multicast-peers
no-tcp-relay

# Block private IP ranges
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=127.0.0.0-127.255.255.255

# === Logging ===
log-file=/var/log/turnserver/turnserver.log

# === Process ===
proc-user=turnserver
proc-group=turnserver

# === Optional: TLS (uncomment if you have certs) ===
# cert=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
# pkey=/etc/letsencrypt/live/yourdomain.com/privkey.pem
